variables:
  UV_CACHE_DIR: .uv-cache

default:
  image: "registry.fedoraproject.org/fedora:latest"
  cache:
    - key:
        files:
          - uv.lock
      paths:
        - $UV_CACHE_DIR
  artifacts:
    paths:
      - build_fonts/meson-dist
      - prebuilt/*.otf
    expire_in: 7 days

build-fonts:
  before_script:
    - dnf install -y git-core libappstream-glib-devel gettext uv
  script:
    - uv run nox -s build_both
    - uv run nox -s dist
  after_script:
    - uv cache prune --ci
